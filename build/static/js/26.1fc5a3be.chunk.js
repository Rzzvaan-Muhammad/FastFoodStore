(this.webpackJsonpFastFoodStore=this.webpackJsonpFastFoodStore||[]).push([[26],{281:function(e,t,a){"use strict";a.r(t);var n=a(50),r=a.n(n),l=a(51),s=a(0),c=a.n(s),o=a(82),i=a(83),d=a(156),u=a(256),m=a(84),h=a(53),p=a.n(h),E=a(54),g=a(55),f=a(68),C=a(59),b=a(70),S=a(72),y=a(250),k=a.n(y),D=a(61);class v extends s.Component{constructor(...e){super(...e),this.columns=[{property:"UserId",label:"User ID"},{property:"ObjectName",label:"Object Name"},{property:"TransactionType",label:"Transaction Type"},{property:"IsDeleted",label:"Deleted",content:e=>e.IsDeleted&&e.IsDeleted?"Yes":"No"},{property:"TransactionDate",label:"Transaction Date",content:e=>e.TransactionDate&&k()(e.TransactionDate).fromNow()},{property:"Version",label:"Version"}]}render(){const e=this.props,t=e.changes,a=e.onSort,n=e.sortColumn,r=e.onSelect,l=e.selected,s=e.onView;return console.log(t),c.a.createElement(D.a,{selected:l,columns:this.columns,data:t,sortColumn:n,onSort:a,onSelect:r,onView:s})}}var w=v,x=a(49);a(58);const I="/ChangeTracking/";function N(e,t){const a="ObjectName=".concat(e,"&Id=").concat(t);return x.a.get("ChangeTracking/GetObjectHistory?".concat(a))}function T(e){return x.a.get("".concat(I,"/Delete?Id=").concat(e))}var j=a(48);class O extends s.Component{constructor(e){var t;super(e),t=this,this.handleDelete=function(){var e=Object(l.a)(r.a.mark((function e(a){var n,l,s,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.changes,l=n.filter(e=>e.Id!==a),t.setState({changes:l}),e.next=5,T(a);case 5:s=e.sent,(c=s.data).status>=400&&c.status<500&&t.setState({changes:n});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.handlePageChange=e=>{this.setState({currentPage:e})},this.handleSort=e=>{this.setState({sortColumn:e})},this.handleSelect=e=>{this.setState({selected:e})},this.handleEdit=e=>{this.props.history.push("change_list/".concat(e))},this.handleAdd=()=>{this.props.history.push("change_list/new")},this.handleSearch=e=>{const t=e.toLowerCase().split(" ").map(e=>e.split(":"));console.log("".concat(t[0][0],":").concat(t[0][1])),console.log("".concat(t[1][0],":").concat(t[1][1]))},this.getPagedData=()=>{const e=this.state,t=e.pageSize,a=e.currentPage,n=e.sortColumn,r=e.changes,l=e.searchName,s=e.searchCategory,c=r;null===l&&null===s||this.filteredResult();const o=p.a.orderBy(c,[n.path],[n.order]),i=Object(C.a)(o,a,t);return{totalCount:c.length,data:i}},this.state={pageSize:5,currentPage:1,sortColumn:{path:"Id",order:"asc"},changes:[],searchName:"",searchCategory:"",selected:-1}}componentDidMount(){var e=this;return Object(l.a)(r.a.mark((function t(){var a,n,l,s,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params,n=a.id,l=a.boName,t.next=3,N(l,n);case 3:s=t.sent,c=s.data,e.setState({changes:c.Result});case 6:case"end":return t.stop()}}),t)})))()}filteredResult(){var e=this;return Object(l.a)(r.a.mark((function t(){var a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N();case 2:a=t.sent,n=a.data,e.setState({changes:n.Result,searchName:null,searchCategory:null});case 5:case"end":return t.stop()}}),t)})))()}render(){const e=this.state,t=e.pageSize,a=e.currentPage,n=e.sortColumn,r=e.selected,l=this.getPagedData(),s=l.totalCount,h=l.data;return c.a.createElement(c.a.Fragment,null,c.a.createElement(o.a,null,c.a.createElement(i.a,{onDoubleClick:()=>this.handleSelect(-1)},c.a.createElement(d.a,null,c.a.createElement(u.a,{className:"float-left"},c.a.createElement(E.a,{icon:g.f}),c.a.createElement("span",{className:"ml-2",style:{fontSize:"1rem",fontWeight:600}},c.a.createElement(j.a,{defaultText:"Changes",resourceId:"lbl_Changes"}),c.a.createElement("br",null),s,c.a.createElement(j.a,{defaultText:"found",resourceId:"lbl_found"}))),c.a.createElement(u.a,{xs:"*",md:"8"},c.a.createElement(S.a,{onSearch:this.handleSearch})),c.a.createElement(u.a,null,c.a.createElement(f.a,{id:r,onEdit:this.handleEdit,onAdd:this.handleAdd,onDelete:this.handleDelete})))),c.a.createElement(m.a,null,c.a.createElement(w,{changes:h,selected:r,sortColumn:n,onSort:this.handleSort,onView:this.handleView,onDelete:this.handleDelete,onExport:this.handleExport,onSelect:this.handleSelect})),c.a.createElement(b.a,{itemsCount:s||0,pageSize:t,currentPage:a,onPageChange:this.handlePageChange})))}}t.default=O},59:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(53),r=a.n(n);function l(e,t,a){const n=(t-1)*a;return r()(e).slice(n).take(a).value()}},61:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(81),s=a(9),c=a(54),o=a(55);class i extends n.Component{constructor(...e){super(...e),this.raiseSort=e=>{const t=Object(s.a)({},this.props.sortColumn);t.property===e?t.order="asc"===t.order?"desc":"asc":(t.property=e,t.order="asc"),this.props.onSort(t)},this.renderSortIcon=e=>{const t=this.props.sortColumn;return e.property!==t.property?null:"asc"===t.order?r.a.createElement(c.a,{icon:o.i}):r.a.createElement(c.a,{icon:o.h})}}render(){return r.a.createElement("thead",null,r.a.createElement("tr",null,this.props.columns.map(e=>r.a.createElement("th",{className:"clickable text-left",key:e.property||e.key,onClick:()=>this.raiseSort(e.property)},e.label," ",this.renderSortIcon(e)))))}}var d=i,u=a(53),m=a.n(u);class h extends n.Component{constructor(...e){super(...e),this.renderCell=(e,t)=>t.content?t.content(e):m.a.get(e,t.property),this.createKey=(e,t)=>e.Id+(t.property||t.key),this.renderStyle=e=>e?{backgroundColor:"skyblue"}:null}render(){const e=this.props,t=e.data,a=e.columns,n=e.selected,l=e.onSelect,s=e.onView;return r.a.createElement("tbody",null,t.map(e=>r.a.createElement("tr",{key:e.Id,className:"clickable",style:this.renderStyle(n===e.Id),onClick:()=>l(e.Id),onDoubleClick:()=>s(e.Id)},a.map(t=>r.a.createElement("td",{key:this.createKey(e,t),className:"text-left"},this.renderCell(e,t))))))}}var p=h;t.a=({columns:e,sortColumn:t,onSort:a,data:n,selected:s,onSelect:c,onView:o})=>r.a.createElement(l.a,{size:"sm",hover:!0,responsive:!0,borderless:!0},r.a.createElement(d,{columns:e,sortColumn:t,onSort:a}),r.a.createElement(p,{data:n,columns:e,selected:s,onView:o,onSelect:c}))},68:function(e,t,a){"use strict";var n=a(11),r=a(0),l=a.n(r),s=a(80),c=a(242),o=a(79),i=a(259),d=a(260),u=a(261),m=a(54),h=a(55),p=a(48);t.a=({id:e,onAdd:t,onView:a,onEdit:E,onDelete:g,onExport:f,onDownload:C,onTrackChanges:b,show:S,Download:y})=>{const k=Object(r.useState)(!1),D=Object(n.a)(k,2),v=D[0],w=D[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(s.a,{className:"float-right"},"false"===S&&l.a.createElement(c.a,{outline:!0,onClick:()=>t(),hidden:e>0},l.a.createElement(m.a,{icon:h.g})),l.a.createElement(o.a,{isOpen:v,toggle:()=>w(!v)},l.a.createElement(i.a,{disabled:e<0,outline:!0,caret:!0},l.a.createElement(p.a,{defaultText:"More",resourceId:"lbl_More"})),l.a.createElement(d.a,null,"false"===S&&l.a.createElement(u.a,{onClick:()=>E(e),disabled:e<0},l.a.createElement(m.a,{icon:h.a,className:"mr-3"}),l.a.createElement(p.a,{defaultText:"Edit",resourceId:"lbl_Edit"})),"false"===S&&l.a.createElement(u.a,{onClick:()=>a(e),disabled:e<0},l.a.createElement(m.a,{icon:h.b,className:"mr-3"}),l.a.createElement(p.a,{defaultText:"View",resourceId:"lbl_View"})),y&&l.a.createElement(u.a,{onClick:()=>C(e),disabled:e<0},l.a.createElement(m.a,{icon:h.d,className:"mr-3"}),l.a.createElement(p.a,{defaultText:"Download",resourceId:"lbl_Download"})),S=l.a.createElement(u.a,{onClick:()=>g(e),disabled:e<0},l.a.createElement(m.a,{icon:h.j,className:"mr-3"}),l.a.createElement(p.a,{defaultText:"Delete",resourceId:"lbl_Delete"})),l.a.createElement(u.a,{divider:!0}),"false"===S&&l.a.createElement(u.a,{onClick:()=>f(e),disabled:e<0},l.a.createElement(m.a,{icon:h.e,className:"mr-3"}),l.a.createElement(p.a,{defaultText:"Export",resourceId:"lbl_Export"})),"false"===S&&l.a.createElement(u.a,{onClick:()=>b(e),disabled:e<0},l.a.createElement(m.a,{icon:h.a,className:"mr-3"}),l.a.createElement(p.a,{defaultText:"Track Changes",resourceId:"lbl_Track_Changes"}))))))}},70:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(53),s=a.n(l);t.a=({itemsCount:e,pageSize:t,onPageChange:a,currentPage:n})=>{const l=Math.ceil(e/t);if(1===l)return null;const c=s.a.range(1,l+1);return r.a.createElement("nav",{style:{margin:"auto"}},r.a.createElement("ul",{className:"pagination"},c.map(e=>r.a.createElement("li",{key:e,className:e===n?"page-item active":"page-item",onClick:()=>a(e),role:"presentation"},r.a.createElement("a",{className:"page-link",href:"#".concat(e)},e)))))}},72:function(e,t,a){"use strict";var n=a(11),r=a(0),l=a.n(r),s=a(87);t.a=({onSearch:e})=>{const t=Object(r.useState)(""),a=Object(n.a)(t,2),c=a[0],o=a[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(s.a,{placeholder:"Search",onChange:e=>o(e.target.value),onKeyDown:t=>{13===t.keyCode&&e(c)}}))}}}]);
//# sourceMappingURL=26.1fc5a3be.chunk.js.map